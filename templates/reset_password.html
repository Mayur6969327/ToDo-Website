{% extends "layout.html" %}
{% block content %}
<h2>Reset Password</h2>

{% if not username %}
<form method="POST" class="mb-3">
  <label>Enter your username:</label>
  <input type="text" name="username" class="form-control" required />
  <button type="submit" class="btn btn-primary mt-3">Next</button>
</form>
{% else %}
<p><strong>Security Question:</strong> {{ question }}</p>
<form method="POST">
  <input type="hidden" name="username" value="{{ username }}" />
  <div class="mb-3">
    <label>Answer:</label>
    <input type="text" name="security_answer" class="form-control" required />
  </div>
  <div class="mb-3">
    <label>New Password:</label>
    <input type="password" name="new_password" class="form-control" required />
  </div>
  <div class="mb-3">
    <label>Confirm Password:</label>
    <input type="password" name="confirm_password" class="form-control" required />
  </div>
  <button type="submit" class="btn btn-success">Reset Password</button>
</form>
{% endif %}

<p class="mt-3"><a href="{{ url_for('login') }}">Back to Login</a></p>
{% endblock %}
